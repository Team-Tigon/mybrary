<p id="notice"><%= notice %></p>

<p>
  <strong>Name:</strong>
  <%= @group.name %>
</p>

<p>
  <strong>Description:</strong>
  <%= @group.description %>
</p>
<% if current_user != nil %>
  <% if !(current_user.groups.include?(@group)) %>
    <%= button_to 'Join this group', join_group_path(@group.id, current_user.id) %>
  <% else %>
    <%= button_to 'Leave this group', leave_group_path(@group.id, current_user.id), data: { confirm: "Are you sure? #{'You are the last member. If you leave the group will be deleted.' if @group.memberships.size == 1}" } %>
  <% end %>
<% end %>

<h4>Members:</h4>
<ul>
  <% @group.memberships.each do |m| %>
    <li>
      <%= link_to m.user.name, m.user %> (<%= pluralize( m.user.items.length, "item") %>)
    </li>
    <% end %>
</ul>

<h4> Items: </h4>
<ul>
  <% @group_items.each do |item| %>
    <li><%= link_to item.name, user_item_path(item.user_id, item.id) %></li>
  <% end %>

</ul>

<%= link_to 'Edit', edit_group_path(@group) %> |
<%= link_to 'Back', groups_path %>
